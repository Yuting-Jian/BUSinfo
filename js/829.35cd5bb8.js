"use strict";(self["webpackChunkbus_pass"]=self["webpackChunkbus_pass"]||[]).push([[829],{829:function(s,t,e){e.r(t),e.d(t,{default:function(){return u}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"rp-wrapper"},[t("div",{staticClass:"address"},[t("div",{ref:"origin",staticClass:"origin"},[t("i",{staticClass:"fa-solid fa-house"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.originAddress,expression:"originAddress"}],attrs:{type:"text",placeholder:"出發地"},domProps:{value:s.originAddress},on:{focus:function(t){return s.addOutline("origin")},focusout:function(t){return s.removeOutline("origin")},input:function(t){t.target.composing||(s.originAddress=t.target.value)}}})]),t("i",{staticClass:"fa-solid fa-down-long"}),t("div",{ref:"destination",staticClass:"destination"},[t("i",{staticClass:"fa-solid fa-location-dot"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.destinationAddress,expression:"destinationAddress"}],attrs:{type:"text",placeholder:"目的地"},domProps:{value:s.destinationAddress},on:{focus:function(t){return s.addOutline("destination")},focusout:function(t){return s.removeOutline("destination")},input:function(t){t.target.composing||(s.destinationAddress=t.target.value)}}})]),t("button",{attrs:{type:"button"},on:{click:s.routePlan}},[s._v("規劃路線")])]),t("div",{staticClass:"plan-wrpper"},[t("h2",{staticClass:"title"},[s._v("規劃結果")]),t("div",{directives:[{name:"show",rawName:"v-show",value:0==s.showStatus,expression:"showStatus == 0"}],staticClass:"loading"},[t("i",{ref:"loading",staticClass:"fa-solid fa-spinner"})]),t("div",{directives:[{name:"show",rawName:"v-show",value:1==s.showStatus,expression:"showStatus == 1"}],staticClass:"error"},[t("span",[s._v(s._s(s.errorMessage))])]),t("ul",{directives:[{name:"show",rawName:"v-show",value:2==s.showStatus,expression:"showStatus == 2"}],staticClass:"plan-list"},s._l(s.planlist.sections,(function(e,i){return t("li",{key:i,staticClass:"transportation"},[t("div",{staticClass:"text"},[t("p",[s._v(s._s("place"==e.departure.place.type?"出發點":e.departure.place.name))]),t("div",[t("i",{staticClass:"fa-solid",class:{"fa-person-walking":"pedestrian"==e.type,"fa-bus":"transit"==e.type}}),t("p",[s._v(s._s("pedestrian"==e.type?"步行":e.transport.number))])]),t("p",[s._v(s._s("place"==e.arrival.place.type?"目的地":e.arrival.place.name))])]),t("i",{directives:[{name:"show",rawName:"v-show",value:!(s.planlist.sections.length==i+1),expression:"!(planlist.sections.length == (index+1))"}],staticClass:"fa-solid fa-chevron-down"})])})),0)])])},a=[],n=e(3822),o={name:"RoutePlan",data(){return{originAddress:"",destinationAddress:"",positions:{origin:{},destination:{}},errorMessage:"",showStatus:2,timer:""}},computed:{...(0,n.rn)("routeplan",["planData"]),planlist(){return this.planData[0]||[]}},methods:{addOutline(s){this.$refs[s].style.outline="1px solid rgb(1, 59, 184)"},removeOutline(s){this.$refs[s].style.outline="none"},routePlan(){if(this.originAddress&&this.destinationAddress){let s=0;this.showStatus=0,this.timer=setInterval((()=>{s+=45,360==s&&(s=0),this.$refs.loading.style.transform=`rotate(${s}deg)`}),150);let t=new google.maps.Geocoder,e=new Promise(((s,e)=>{t.geocode({address:this.originAddress},((i,a)=>{"OK"==a?(this.positions.origin.lat=i[0].geometry.location.lat(),this.positions.origin.lng=i[0].geometry.location.lng(),t.geocode({address:this.destinationAddress},((t,i)=>{"OK"==i?(this.positions.destination.lat=t[0].geometry.location.lat(),this.positions.destination.lng=t[0].geometry.location.lng(),s("OK")):e(i)}))):e(a)}))}));e.then((async s=>{try{await this.$store.dispatch("routeplan/getBusRoutePlan",this.positions),clearInterval(this.timer),this.showStatus=2}catch(t){console.log(t)}}),(s=>{clearInterval(this.timer),this.showStatus=1,this.errorMessage="請輸入較詳細的地址，例:板橋區中山路1段161號"}))}else this.showStatus=1,this.errorMessage="上述地址請勿空白"}}},r=o,l=e(1001),d=(0,l.Z)(r,i,a,!1,null,"5b12f45c",null),u=d.exports}}]);
//# sourceMappingURL=829.35cd5bb8.js.map